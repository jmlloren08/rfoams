"use strict";$((function(){let e=$("#dataTableeBOSS").DataTable({processing:!0,serverSide:!0,ajax:{url:getDataFromeBOSSURL,type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},columns:[{data:"id",visible:!1},{data:"date_of_inspection"},{data:"citymunDesc"},{data:"provDesc"},{data:"regDesc"},{data:"eboss_submission",render:function(e){return"No submission"===e?`<span class="badge bg-danger"> ${e} </span>`:`<span class="badge bg-success"> ${e} </span>`}},{data:"type_of_boss",render:function(e){return"Fully-Automated"===e?`<span class="badge bg-primary"> ${e} </span>`:"Partly-Automated"===e?`<span class="badge bg-info"> ${e} </span>`:"Physical/Collocated BOSS"===e?`<span class="badge bg-warning"> ${e} </span>`:`<span class="badge bg-danger"> ${e} </span>`}},{data:"deadline_of_action_plan",render:function(e){return"Not applicable"===e?`<span class="badge bg-warning"> ${e} </span>`:`<span class="badge bg-success"> ${e} </span>`}},{data:null,render:function(e){const a=new Date(e.submission_of_action_plan),o=new Date(e.deadline_of_action_plan);return"Not applicable"===e.submission_of_action_plan?`'<span class="badge bg-warning"> ${e.submission_of_action_plan} </span>`:a<=o?`<span class="badge bg-success"> ${e.submission_of_action_plan} </span>`:`<span class="badge bg-danger"> ${e.submission_of_action_plan} </span>`}},{data:"remarks"},{data:"bplo_head"},{data:"contact_no"},{data:"",defaultContent:'<td class="text-right py-0 align-middle">\n                    <div class="btn-group btn-group-sm">\n                    <a class="btn btn-info" id="btnEdit" title="Edit eBOSS"><i class="fas fa-edit"></i></a>\n                    <a class="btn btn-danger" id="btnDelete" title="Delete eBOSS"><i class="fas fa-times-circle"></i></a>\n                    </div>\n                    </td>'}],paging:!0,lengthChange:!0,searching:!0,ordering:!0,order:[[0,"desc"]],info:!0,autoWidth:!0,lengthMenu:[10,20,30,40,50],scrollX:!0});$("#region").on("change",(function(){let e=$(this).val();$.ajax({url:getProvincesByRegionURL,type:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{region:e},success:function(e){let a=$("#province"),o=$("#city_municipality");o.empty(),o.append('<option value="" selected disabled>Choose</option>'),a.empty(),a.append('<option value="" selected disabled>Choose</option>'),e.forEach((function(e){a.append(`<option value = ${e.provCode} > ${e.provDesc} </option>`)}))},error:function(e){console.log("Error fetching province: ",e)}})})),$("#province").on("change",(function(){let e=$(this).val();$.ajax({url:getCityMuncipalityByProvinceURL,type:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{province:e},success:function(e){let a=$("#city_municipality");a.empty(),a.append('<option value="" selected disabled>Choose</option>'),e.forEach((function(e){a.append(`<option value = ${e.citymunCode} > ${e.citymunDesc} </option>`)}))},error:function(e){console.log("Error fetching city/municipality: ",e)}})})),$("#formeBOSS").submit((function(a){a.preventDefault();let o=$("#formeBOSS")[0],t=new FormData(o),n=t.get("id");if(t.set("no_submission",$("#no_submission").is(":checked")),t.set("not_applicable_doap",$("#not_applicable_doap").is(":checked")),t.set("not_applicable_soap",$("#not_applicable_soap").is(":checked")),$("#no_submission").is(":checked")?t.set("eboss_submission","No submission"):t.set("eboss_submission",t.get("eboss_submission")),$("#not_applicable_doap").is(":checked")?t.set("deadline_of_action_plan","Not applicable"):t.set("deadline_of_action_plan",t.get("deadline_of_action_plan")),$("#not_applicable_doap").is(":checked")?t.set("submission_of_action_plan","Not applicable"):t.set("submission_of_action_plan",t.get("submission_of_action_plan")),this.checkValidity())if(n){let a={date_of_inspection:t.get("date_of_inspection"),region:t.get("region"),province:t.get("province"),city_municipality:t.get("city_municipality"),eboss_submission:t.get("eboss_submission"),no_submission:$("#no_submission").is(":checked"),type_of_boss:t.get("type_of_boss"),deadline_of_action_plan:t.get("deadline_of_action_plan"),not_applicable_doap:$("#not_applicable_doap").is(":checked"),submission_of_action_plan:t.get("submission_of_action_plan"),not_applicable_soap:$("#not_applicable_soap").is(":checked"),remarks:t.get("remarks"),bplo_head:t.get("bplo_head"),contact_no:t.get("contact_no")};$.ajax({url:`${updateeBOSSURL}/${n}`,type:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,dataType:"JSON",success:function(a){Swal.fire({icon:"success",title:"Success",text:a.success}).then((()=>{e.ajax.reload(),$("#modal-add-new-eboss").modal("hide")}))},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})}else $.ajax({url:storeeBOSSURL,type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:t,processData:!1,contentType:!1,success:function(a){Swal.fire({icon:"success",title:"Success",text:a.success}).then((()=>{e.ajax.reload(),$("#modal-add-new-eboss").modal("hide")}))},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})})),$(document).on("click","#btnEdit",(function(a){let o=$(this).closest("tr"),t=e.row(o).data().id;$.ajax({url:`${editeBOSSURL}/${t}`,type:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#modal-add-new-eboss").modal("show"),$("#id").val(e.id),$("#date_of_inspection").val(e.date_of_inspection),$("#region").val(e.region),$("#province").val(e.province),$("#city_municipality").val(e.city_municipality),$("#eboss_submission").val(e.eboss_submission),$("#type_of_boss").val(e.type_of_boss),$("#deadline_of_action_plan").val(e.deadline_of_action_plan),$("#submission_of_action_plan").val(e.submission_of_action_plan),$("#remarks").val(e.remarks),$("#bplo_head").val(e.bplo_head),$("#contact_no").val(e.contact_no)},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})})),$(document).on("click","#btnDelete",(function(a){let o=$(this).closest("tr"),t=e.row(o).data().id;Swal.fire({title:"Are you sure?",text:"You will not be able to revert this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((a=>{a.isConfirmed&&$.ajax({url:`${editeBOSSURL}/${t}`,type:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(a){Swal.fire({icon:"success",title:"Success",text:a.success}).then((()=>{e.ajax.reload()}))},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})}))})),$(document).ready((function(){$(".needs-validation").each((function(){$(this).on("submit",(function(e){!1===this.checkValidity()&&(e.preventDefault(),e.stopPropagation()),$(this).addClass("was-validated")}))}))})),$("#modal-add-new-eboss").on("hidden.bs.modal",(function(e){$("#id").val(""),$("#date_of_inspection").val("mm/dd/yyyy"),$("#region").val("Choose"),$("#province").val("Choose"),$("#city_municipality").val("Choose"),$("#eboss_submission").val("mm/dd/yyyy"),$("#type_of_boss").val("Choose"),$("#deadline_of_action_plan").val("mm/dd/yyyy"),$("#submission_of_action_plan").val("mm/dd/yyyy"),$("#remarks").val(""),$("#bplo_head").val(""),$("#contact_no").val(""),$("#no_submission").prop("checked",!1),$("#eboss_submission").prop("disabled",!1),$("#deadline_of_action_plan").prop("disabled",!1),$("#not_applicable_doap").prop("checked",!1),$("#submission_of_action_plan").prop("disabled",!1),$("#not_applicable_soap").prop("checked",!1)}))})),$(document).ready((function(){setTimeout((function(){$((function(){var e={fontColor:"#495057",fontStyle:"bold"},a="index",o=!0,t=[];$(".fa-square").each((function(){t.push($(this).data("color"))}));var n=[{label:"2023",backgroundColor:t[0],borderColor:t[0],data:[fullyAutomated2023]},{label:"2024",backgroundColor:t[1],borderColor:t[1],data:[fullyAutomated2024]}],s=$("#fa-chart");new Chart(s,{type:"bar",data:{labels:["Fully-Automated"],datasets:n},options:{maintainAspectRatio:!1,tooltips:{mode:a,intersect:o},hover:{mode:a,intersect:o},legend:{display:!1},scales:{yAxes:[{gridLines:{display:!0,lineWidth:"4px",color:"rgba(0, 0, 0, .2)",zeroLineColor:"transparent"},ticks:$.extend({beginAtZero:!0},e)}],xAxes:[{display:!0,gridLines:{display:!0},ticks:e}]}}})})),$((function(){var e={fontColor:"#495057",fontStyle:"bold"},a="index",o=!0,t=[];$(".fa-square").each((function(){t.push($(this).data("color"))}));var n=[{label:"2023",backgroundColor:t[0],borderColor:t[0],data:[partlyAutomated2023]},{label:"2024",backgroundColor:t[1],borderColor:t[1],data:[partlyAutomated2024]}],s=$("#pa-chart");new Chart(s,{type:"bar",data:{labels:["Partly-Automated"],datasets:n},options:{maintainAspectRatio:!1,tooltips:{mode:a,intersect:o},hover:{mode:a,intersect:o},legend:{display:!1},scales:{yAxes:[{gridLines:{display:!0,lineWidth:"4px",color:"rgba(0, 0, 0, .2)",zeroLineColor:"transparent"},ticks:$.extend({beginAtZero:!0},e)}],xAxes:[{display:!0,gridLines:{display:!0},ticks:e}]}}})})),$((function(){var e={fontColor:"#495057",fontStyle:"bold"},a="index",o=!0,t=[];$(".fa-square").each((function(){t.push($(this).data("color"))}));var n=[{label:"2023",backgroundColor:t[0],borderColor:t[0],data:[physicalCollocated2023]},{label:"2024",backgroundColor:t[1],borderColor:t[1],data:[physicalCollocated2024]}],s=$("#pc-chart");new Chart(s,{type:"bar",data:{labels:["Physical/Collocated BOSS"],datasets:n},options:{maintainAspectRatio:!1,tooltips:{mode:a,intersect:o},hover:{mode:a,intersect:o},legend:{display:!1},scales:{yAxes:[{gridLines:{display:!0,lineWidth:"4px",color:"rgba(0, 0, 0, .2)",zeroLineColor:"transparent"},ticks:$.extend({beginAtZero:!0},e)}],xAxes:[{display:!0,gridLines:{display:!0},ticks:e}]}}})})),$((function(){var e={fontColor:"#495057",fontStyle:"bold"},a="index",o=!0,t=[];$(".fa-square").each((function(){t.push($(this).data("color"))}));var n=[{label:"2023",backgroundColor:t[0],borderColor:t[0],data:[noCollocatedBOSS2023]},{label:"2024",backgroundColor:t[1],borderColor:t[1],data:[noCollocatedBOSS2024]}],s=$("#nc-chart");new Chart(s,{type:"bar",data:{labels:["No Collocated BOSS"],datasets:n},options:{maintainAspectRatio:!1,tooltips:{mode:a,intersect:o},hover:{mode:a,intersect:o},legend:{display:!1},scales:{yAxes:[{gridLines:{display:!0,lineWidth:"4px",color:"rgba(0, 0, 0, .2)",zeroLineColor:"transparent"},ticks:$.extend({beginAtZero:!0},e)}],xAxes:[{display:!0,gridLines:{display:!0},ticks:e}]}}})}))}),500)}));