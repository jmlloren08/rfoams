"use strict";$((function(){let e=$("#dataTableRFOs").DataTable({processing:!0,serverSide:!0,ajax:{url:getDataFromRFOsURL,type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},columns:[{data:"id",visible:!1},{data:"rfo"},{data:"name"},{data:"position"},{data:"contact_number"},{data:"regDesc"},{data:"created_at",render:function(e){return moment(e).format("YYYY-MM-DD HH:mm:ss")}},{data:"updated_at",render:function(e){return moment(e).format("YYYY-MM-DD HH:mm:ss")}},{data:"",defaultContent:'<td class="text-right py-0 align-middle">\n                    <div class="btn-group btn-group-sm">\n                    <a class="btn btn-danger" id="btnDelete" title="Delete RFO"><i class="fas fa-times-circle"></i></a>\n                    </div>\n                    </td>'}],paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,lengthMenu:[10,20,30,40,50],scrollX:!0});$("#formRFO").submit((function(t){t.preventDefault();let a=$("#formRFO")[0],r=new FormData(a),n=r.get("id");if(this.checkValidity())if(n){let t={rfo:r.get("rfo"),user_id:r.get("user_id"),position:r.get("position"),contact_number:r.get("contact_number"),regCode:r.get("regCode")};$.ajax({url:`${updateRFOsURL}/${n}`,type:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:t,dataType:"JSON",success:function(t){Swal.fire({icon:"success",title:"Success",text:t.success}).then((()=>{e.ajax.reload(),$("#modal-add-new-rfo").modal("hide")}))},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})}else $.ajax({url:storeRFOsURL,type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:r,processData:!1,contentType:!1,success:function(t){Swal.fire({icon:"success",title:"Success",text:t.success}).then((()=>{e.ajax.reload(),$("#modal-add-new-rfo").modal("hide")}))},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})})),$(document).on("click","#btnEdit",(function(t){let a=$(this).closest("tr"),r=e.row(a).data().id;$.ajax({url:`${editRFOsURL}/${r}`,type:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#modal-add-new-rfo").modal("show"),$("#id").val(e.id),$("#rfo").val(e.rfo),$("#focal_person").val(e.focal_person),$("#position").val(e.position),$("#contact_number").val(e.contact_number),$("#regCode").val(e.regCode)},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})})),$(document).on("click","#btnDelete",(function(t){let a=$(this).closest("tr"),r=e.row(a).data().id;Swal.fire({title:"Are you sure?",text:"You will not be able to revert this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((t=>{t.isConfirmed&&$.ajax({url:`${editRFOsURL}/${r}`,type:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){Swal.fire({icon:"success",title:"Success",text:t.success}).then((()=>{e.ajax.reload()}))},error:function(e){Swal.fire({icon:"error",title:"Error",text:e.responseJSON.errors})}})}))})),$(document).ready((function(){$(".needs-validation").each((function(){$(this).on("submit",(function(e){!1===this.checkValidity()&&(e.preventDefault(),e.stopPropagation()),$(this).addClass("was-validated")}))}))})),$("#modal-add-new-rfo").on("hidden.bs.modal",(function(e){$("#id").val(""),$("#rfo").val(""),$("#focal_person").val(""),$("#position").val(""),$("#contact_number").val(""),$("#email_address").val("")}))}));